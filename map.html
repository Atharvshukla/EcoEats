<!DOCTYPE html>
<html>
<head>
  <title>Map with Floating Button</title>
  <!-- Include OpenLayers CSS -->
  <link rel="stylesheet" href="https://openlayers.org/en/v6.13.0/css/ol.css" type="text/css">
  <!-- Include OpenLayers JavaScript -->
  <script src="https://openlayers.org/en/v6.13.0/build/ol.js"></script>
  <style>
    /* Specify a height for the map container */
    #map {
      width: 100%;
      height: 90vh; /* Adjust height as needed */
    }
    
    /* Style for the floating button */
    .floating-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: #fff;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Create a div to hold the map -->
  <div id="map"></div>

  <!-- Floating button to place pointer at current location -->
  <div class="floating-button" onclick="placePointer()">Place Pointer Here</div>

  <script>
    var map;

    // Initialize the map when the page is loaded
    window.onload = function() {
      // Create a new OpenLayers map object
      map = new ol.Map({
        // Specify the target element for the map
        target: 'map',
        // Create layers for the map (in this case, a tile layer)
        layers: [
          new ol.layer.Tile({
            // Specify the source for the tile layer (OpenStreetMap in this case)
            source: new ol.source.OSM()
          })
        ],
        // Specify initial view parameters (center and zoom level)
        view: new ol.View({
          center: ol.proj.fromLonLat([0, 0]), // Center map at the equator initially
          zoom: 2 // Initial zoom level (0 = whole world, higher numbers = closer)
        })
      });
    };

    // Function to place a pointer at the current location
    function placePointer() {
      // Check if geolocation is supported by the browser
      if (navigator.geolocation) {
        // Call the getCurrentPosition method to get the current position
        navigator.geolocation.getCurrentPosition(function(position) {
          // Retrieve latitude and longitude from the position object
          var latitude = position.coords.latitude;
          var longitude = position.coords.longitude;

          // Create a pointer (marker) overlay at the current location
          var pointerOverlay = new ol.Overlay({
            // Specify the element to be used as the marker
            element: document.createElement('div'),
            // Position the marker at the current location
            position: ol.proj.fromLonLat([longitude, latitude])
          });

          // Add the pointer overlay to the map
          map.addOverlay(pointerOverlay);

          // Set a pointer image for the marker
          pointerOverlay.getElement().innerHTML = '<img src="https://openlayers.org/en/latest/examples/data/icon.png" style="width: 32px; height: 32px;">';
        }, function(error) {
          // Handle errors
          switch(error.code) {
            case error.PERMISSION_DENIED:
              alert("User denied the request for Geolocation.");
              break;
            case error.POSITION_UNAVAILABLE:
              alert("Location information is unavailable.");
              break;
            case error.TIMEOUT:
              alert("The request to get user location timed out.");
              break;
            case error.UNKNOWN_ERROR:
              alert("An unknown error occurred.");
              break;
          }
        });
      } else {
        // Geolocation is not supported by the browser
        alert("Geolocation is not supported by this browser.");
      }
    }
  </script>
</body>
</html>